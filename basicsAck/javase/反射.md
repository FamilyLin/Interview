反射

一、反射机制

<img src="C:\Users\11437\AppData\Roaming\Typora\typora-user-images\image-20200728193657795.png" alt="image-20200728193657795" style="zoom:80%;" />

![image-20200728194731531](C:\Users\11437\AppData\Roaming\Typora\typora-user-images\image-20200728194731531.png)

![image-20200728195202488](C:\Users\11437\AppData\Roaming\Typora\typora-user-images\image-20200728195202488.png)



> 通过直接new对象或反射的方法都可以调用公共的结构，用哪个？
>
> 建议用new；
>
> 反射的特征：动态性



> 反射机制与面向对象的封装性是不是矛盾？
>
> 不矛盾。



二、关于java.lang.Class类的理解

1、类的加载过程

javac -- >  java -------java后加载到内存中的类，成为运行时类，即为Class的实例。



**2、获取Class实例的方式**

①调用运行时类的属性：.class

Class<Person>  clazz  =  Person.class;

②通过运行时类的对象，调用getClass();

Person p1 = new Person();

Class  clazz = p1.getClass();

③调用Class的静态方法：forName(String classPath)

Class clazz = Class.forName("aaaaaa.Person");

④使用类的加载器：ClassLoader

ClassLoader classloader =  ReflectionTest.class.getClassLoader();

Class clazz = classloader.loadClass("aaaa.Person");



3、加载到内存中的运行时类，会缓存一段时间，可以通过不同的方式来获取



4、Properties：读取配置文件

Properties pros = new Properties();

FileInputStream fis = new FileInputStream("jdbc.properties");

pros.load(fis);



三、创建运行时类的对象

通过反射创建对应的运行时类的对象

Class clazz = Person.class;

Object obj = clazz.newInstance();

*newInstance()*：调用此方法，创建对应的运行时类的对象



